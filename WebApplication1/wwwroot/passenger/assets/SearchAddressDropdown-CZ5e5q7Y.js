import{g as i}from"./geocoder-BmMrAMPn.js";import{d,_ as u,c as r,e as n,v as c,a as l,F as h,r as p,l as m,o as s,t as g}from"./index-B-utJTcv.js";const y=d({name:"SearchAddressDropdown",props:{modelValue:{type:Object,default:()=>({})},placeholder:{type:String,default:"Введите адрес"},value:{type:String,default:null}},data(){return{query:"",geocoderSearchResult:[],timer:-1}},emits:{"update:modelValue"(e){return e!=null}},mounted(){this.value!=null&&(this.query=this.value)},methods:{searchResultClick(e){const t={properties:this.geocoderSearchResult[e].data.properties,position:this.geocoderSearchResult[e].data.center};this.query=this.geocoderSearchResult[e].data.name,this.$emit("update:modelValue",t),this.geocoderSearchResult=[]},onkeyup(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.geocodeCallBack,1e3)},geocodeCallBack(){if(this.query.length===0){this.geocoderSearchResult=[];return}i.geocode(this.query,e=>{this.geocoderSearchResult=e.map((t,a)=>({id:a,data:t}))})}}}),S=["placeholder"],f={key:0,class:"list"},k=["onClick"];function R(e,t,a,v,q,C){return s(),r("div",null,[n(l("input",{type:"text",placeholder:e.placeholder,"onUpdate:modelValue":t[0]||(t[0]=o=>e.query=o),onKeyup:t[1]||(t[1]=(...o)=>e.onkeyup&&e.onkeyup(...o)),required:""},null,40,S),[[c,e.query]]),e.geocoderSearchResult.length>0?(s(),r("div",f,[l("ul",null,[(s(!0),r(h,null,p(e.geocoderSearchResult,o=>(s(),r("li",{key:o.id,onClick:V=>e.searchResultClick(o.id)},g(o.data.name),9,k))),128))])])):m("",!0)])}const D=u(y,[["render",R]]);export{D as S};
