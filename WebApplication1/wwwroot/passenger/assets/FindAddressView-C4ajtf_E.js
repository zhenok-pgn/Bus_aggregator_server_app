import{d,_ as l,o as p,c,a as r,k as w,b as a,F as v,g as S,f as i}from"./index-B-utJTcv.js";import{O as _}from"./OSM-CjAzVhPT.js";import{S as $}from"./SearchAddressDropdown-CZ5e5q7Y.js";import"./geocoder-BmMrAMPn.js";const g=d({name:"HereMap",props:{center:Object},emits:{addressSelected(e){return e!=null}},data(){return{apikey:"BxCHADoLHTtDSi3O4swMxIokyDODTOUaFlYGGphnQfo",platform:null,selectedCoordinates:null,map:null}},async mounted(){this.platform=new window.H.service.Platform({apikey:this.apikey}),this.initializeHereMap()},watch:{selectedCoordinates(e){let t=this.platform.getSearchService(),o={at:`${e.lat.toFixed(4)},${e.lng.toFixed(4)},150`,limit:"1"};t.reverseGeocode(o,s=>{let n=new window.H.map.Marker(s.items[0].position);this.map.addObject(n),this.$emit("addressSelected",{title:s.items[0].title,position:`${s.items[0].position.lat},${s.items[0].position.lng}`}),console.log(s)},()=>{console.log("Cannot get addres by coordinates!")})}},methods:{initializeHereMap(){const e=this.$refs.hereMap,t=window.H;let o=this.platform.createDefaultLayers(),s=new t.Map(e,o.vector.normal.map,{zoom:10,center:this.center});this.map=s,addEventListener("resize",()=>s.getViewPort().resize()),new t.mapevents.Behavior(new t.mapevents.MapEvents(s)),t.ui.UI.createDefault(s,o),this.setUpClickListener(s)},setUpClickListener(e){e.addEventListener("tap",t=>{this.selectedCoordinates=e.screenToGeo(t.currentPointer.viewportX,t.currentPointer.viewportY),console.log("Clicked at "+Math.abs(this.selectedCoordinates.lat.toFixed(4))+(this.selectedCoordinates.lat>0?"N":"S")+" "+Math.abs(this.selectedCoordinates.lng.toFixed(4))+(this.selectedCoordinates.lng>0?"E":"W"))})}}}),C={id:"map"},M={id:"mapContainer",style:{height:"600px",width:"100%"},ref:"hereMap"};function k(e,t,o,s,n,m){return p(),c("div",C,[r("div",M,null,512)])}const y=l(g,[["render",k],["__scopeId","data-v-8426615f"]]),x=d({props:{typePage:String},emits:{addressSelected(e){return e!=null}},data(){return{addressTitle:"",position:"",address:{}}},components:{HereMap:y,OSM:_,SearchAddressDropdown:$},methods:{returnSelectedAddress(){this.$emit("addressSelected",this.address)}}}),H=["value"];function D(e,t,o,s,n,m){const h=i("SearchAddressDropdown"),u=i("OSM");return p(),c(v,null,[w(e.$slots,"default",{},()=>[t[1]||(t[1]=S("sample text"))]),r("div",null,[r("input",{type:"text",value:e.address.title},null,8,H),r("button",{onClick:t[0]||(t[0]=(...f)=>e.returnSelectedAddress&&e.returnSelectedAddress(...f))},"apply")]),a(h),a(u)],64)}const L=l(x,[["render",D]]);export{L as default};
