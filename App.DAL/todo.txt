переписать Trip, чтобы на каждую промежуточную точку маршрута создавалс€ отдельный trip (перебрать все комбинации). 
 аждый trip должен иметь parentTrip (родительским считаетс€ trip от начально до конечной точки маршрута).

ћаршрут A--B--C--D--E
A-E - родительский
—оздать A-B, A-C, A-D, B-C, B-D, B-E, и т.д. то есть это будет денормализаци€ дл€ ускорени€ поиска рейсов 